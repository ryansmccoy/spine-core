# ARCHITECTURE

**System Design and Structure**

> **Auto-generated from code annotations**  
> **Last Updated**: {{ generated_at.strftime('%B %Y') }}  
> **Status**: Living Document

---

## Table of Contents

1. [System Overview](#system-overview)
{% set toc_num = 2 %}
{% for class_name in components.keys() | sort %}
{{ toc_num }}. [{{ class_name }}](#{{ class_name | lower | replace(' ', '-') | replace('_', '-') }})
{% set toc_num = toc_num + 1 %}
{% endfor %}

---

## System Overview

{% for class_name, diags in diagram_by_class.items() %}
{% for diagram in diags %}
{% set content = diagram.content if diagram.content is string else diagram.get('content', '') %}
{% if 'layer' in content.lower() or 'tier' in content.lower() or 'frontend' in content.lower() or 'api' in content.lower() %}
```
{{ content | trim }}
```

{% set source_class = diagram.source_class if diagram.source_class is defined else diagram.get('source_class') %}
{% set source_file = diagram.source_file if diagram.source_file is defined else diagram.get('source_file', '') %}
{% set source_line = diagram.source_line if diagram.source_line is defined else diagram.get('source_line') %}
{% if source_file %}
*Source: [`{{ source_class or source_file }}`]({{ source_file }}{% if source_line %}#L{{ source_line }}{% endif %})*
{% endif %}

{% endif %}
{% endfor %}
{% endfor %}

---

{% for class_name in (components.keys() | list + diagram_by_class.keys() | list) | unique | sort %}
## {{ class_name }}

{% if class_name in diagram_by_class %}
{% for diagram in diagram_by_class[class_name] %}
{% set content = diagram.content if diagram.content is string else diagram.get('content', '') %}
```
{{ content | trim }}
```

{% set source_class = diagram.source_class if diagram.source_class is defined else diagram.get('source_class') %}
{% set source_file = diagram.source_file if diagram.source_file is defined else diagram.get('source_file', '') %}
{% set source_line = diagram.source_line if diagram.source_line is defined else diagram.get('source_line') %}
{% if source_file %}
*Source: [`{{ source_class or source_file }}`]({{ source_file }}{% if source_line %}#L{{ source_line }}{% endif %})*
{% endif %}

{% endfor %}
{% endif %}

{% if class_name in components %}
{% for fragment in components[class_name] %}
{% set content = fragment.content if fragment.content is string else fragment.get('content', '') %}
{{ content | trim }}

{% endfor %}
{% endif %}

{% endfor %}

---

*{{ total_diagrams }} architectural diagrams from {{ total_components }} components*

*Generated by [doc-automation](https://github.com/your-org/py-sec-edgar/tree/main/spine-core/packages/doc-automation)*
